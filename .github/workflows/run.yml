name: Testinnnn sauce demo
on: push
jobs:
  xyinya:
    runs-on: ubuntu-latest
    steps:
    - name: Get repo code
      uses: actions/checkout@v4


    - name: install requirements
      run: | 
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: Install Playwright dependencies
      run: python -m playwright install-deps


    - name: install pw browsers
      run: python -m playwright install

    - name: run test & allure
      run: pytest --alluredir=results

    - name: generate allure report
      run: allure generate allure-results -o allure-report

    - name: get allure report
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{secrets.GITHUB_TOKEN}}
        publish_dir: ./allure-report

